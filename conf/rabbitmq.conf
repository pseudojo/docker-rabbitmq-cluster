# RabbitMQ Common Configuration
loopback_users.guest = false
vm_memory_high_watermark.relative = 0.8

# RabbitMQ Peer Discovery Configuration
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_consul
cluster_formation.consul.host = consul
# Set to true if automatic removal of unknown/absent nodes
# is desired. This can be dangerous, see
#  * https://www.rabbitmq.com/cluster-formation.html#node-health-checks-and-cleanup
#  * https://groups.google.com/forum/#!msg/rabbitmq-users/wuOfzEywHXo/k8z_HWIkBgAJ
cluster_formation.node_cleanup.only_log_warning = true
cluster_formation.consul.svc_addr_auto = true
# Peer discovery customization for consul (example)
#  * https://www.rabbitmq.com/cluster-formation.html#peer-discovery-consul
cluster_formation.consul.svc_meta.owner = team-xyz
cluster_formation.consul.svc_meta.service = service-one
cluster_formation.consul.svc_meta.stats_url = https://service-one.team-xyz.example.test/stats/
cluster_formation.consul.svc_ttl = 5
cluster_formation.consul.deregister_after = 60
cluster_formation.consul.svc_addr_use_nodename = true
cluster_formation.consul.use_longname = true
cluster_formation.consul.domain_suffix = example.test
cluster_formation.consul.lock_timeout = 60
cluster_partition_handling = autoheal

# uncomment if enable proxy_protocol
#proxy_protocol = true

# MQTT Plug-in Configuration
mqtt.listeners.tcp.default = 1883
# "true" if allows anonymous access
mqtt.allow_anonymous  = true
#mqtt.allow_anonymous  = false
mqtt.default_user     = rabbitmq
mqtt.default_pass     = changeme
#mqtt.durable_queue_type = quorum
mqtt.vhost            = /
mqtt.exchange         = amq.topic
# 24 hours by default
# if ttl disables, set "undefined".
mqtt.subscription_ttl = 86400000
mqtt.prefetch         = 10
# mqtt ssl setting
#mqtt.listeners.ssl.default = 8883
#ssl_options.verify     = verify_peer
#ssl_options.fail_if_no_peer_cert  = true

